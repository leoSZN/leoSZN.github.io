(function(){var e;e=function(){function e(){"registrations"===$("body").data("controller")&&"edit"===$("body").data("action")&&$("#user_service_worker_enabled").on("click",this.subscribe)}return e.prototype.subscribe=function(){return $("#user_service_worker_enabled").is(":checked")?"serviceWorker"in navigator?navigator.serviceWorker.register("/worker.js").then(function(e){e.pushManager.subscribe({userVisibleOnly:!0}).then(function(e){var n;n=e.toJSON(),$.ajax("/service_worker/subscribe",{method:"POST",data:{auth:n.keys.auth,p256dh:n.keys.p256dh,endpoint:n.endpoint},success:function(){return new Notification("Service Worker Enabled",{body:"You will now get instant notifications when your browser is open",icon:"https://selly.gg/images/selly-icon-blue-bg-192x.png"})},error:function(){},complete:function(){}})})})["catch"](function(e){console.log("Registration failed",":^(",e)}):alert("Service Worker isn't supported on this browser"):$.ajax("/service_worker/unsubscribe",{method:"POST",success:function(){return new Notification("Service Worker Disabled",{body:"You will now only get notifications whilst on the dashboard",icon:"https://selly.gg/images/selly-icon-blue-bg-192x.png"})}})},e}(),jQuery(function(){return new e})}).call(this);